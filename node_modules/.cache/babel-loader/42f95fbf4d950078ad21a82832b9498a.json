{"ast":null,"code":"import _regeneratorRuntime from\"/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{v4}from'uuid';import{Button}from'react-bootstrap';import{Redirect}from'react-router-dom';import ShareBtn from'../components/ShareBtn';import useRedirect from'../hooks/useRedirect';import whiteHeartIcon from\"../images/whiteHeartIcon.svg\";import blackHeartIcon from\"../images/blackHeartIcon.svg\";import functionSetFavoriteFood from'../utils/functionSetFavoriteFood';import functionRenderRecipe from'../utils/functionRenderRecipe';import HeaderWithoutSearch from'../components/HeaderWithoutSearch';function FoodDetails(props){var id=props.match.params.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),recipeRender=_useState2[0],setRecipeRender=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setloading=_useState4[1];var _useRedirect=useRedirect(),shouldRedirect=_useRedirect.shouldRedirect,redirect=_useRedirect.redirect;var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),drinksRecomendation=_useState6[0],setdrinksRecomendation=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),heartColor=_useState8[0],setHeartColor=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),start=_useState10[0],setStart=_useState10[1];useEffect(function(){setloading(true);var fetchAPI=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var END_POINT,response,_yield$response$json,meals;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:END_POINT=\"https://www.themealdb.com/api/json/v1/1/lookup.php?i=\".concat(id);_context.next=3;return fetch(END_POINT);case 3:response=_context.sent;_context.next=6;return response.json();case 6:_yield$response$json=_context.sent;meals=_yield$response$json.meals;setRecipeRender(meals);case 9:case\"end\":return _context.stop();}}},_callee);}));return function fetchAPI(){return _ref.apply(this,arguments);};}();fetchAPI();setloading(false);},[id]);useEffect(function(){var favoriteRecipes=JSON.parse(localStorage.getItem('favoriteRecipes'))||[];if(favoriteRecipes.some(function(item){return item.id===id;})){setHeartColor(true);}var inProgressRecipes=JSON.parse(localStorage.getItem('inProgressRecipes'));if(inProgressRecipes&&inProgressRecipes.meals[id]){setStart(false);}},[id]);useEffect(function(){var fetchAPIDrinks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var SIX,urlDrinks,results,firstSix;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:SIX=6;urlDrinks='https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';_context2.next=4;return fetch(urlDrinks).then(function(response){return response.json();});case 4:results=_context2.sent;_context2.next=7;return results.drinks.slice(0,SIX);case 7:firstSix=_context2.sent;setdrinksRecomendation(firstSix);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchAPIDrinks(){return _ref2.apply(this,arguments);};}();fetchAPIDrinks();setloading(false);},[]);if(loading){return/*#__PURE__*/React.createElement(\"h1\",null,\"...carregando\");}if(redirect.should){return/*#__PURE__*/React.createElement(Redirect,{to:redirect.path});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(HeaderWithoutSearch,null,\"Detalhes\"),recipeRender.map(function(item){return/*#__PURE__*/React.createElement(\"div\",{key:v4(),className:\"details\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"meal\",key:v4(),src:item.strMealThumb,\"data-testid\":\"recipe-photo\",className:\"meal-img\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"detail-card\"},/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"recipe-title\"},item.strMeal),/*#__PURE__*/React.createElement(\"div\",{className:\"details-btn-div\"},/*#__PURE__*/React.createElement(ShareBtn,{id:id,type:\"comida\",className:\"btn-share\"}),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",type:\"button\",className:\"favorite-btn\",onClick:function onClick(){return functionSetFavoriteFood(recipeRender,id,setHeartColor);}},/*#__PURE__*/React.createElement(\"img\",{id:\"fav-btn\",src:heartColor?blackHeartIcon:whiteHeartIcon,alt:\"favoritar\",\"data-testid\":\"favorite-btn\",className:\"favorite-img\"})))),/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"recipe-category\"},/*#__PURE__*/React.createElement(\"span\",null,\"Categoria: \"),item.strCategory),/*#__PURE__*/React.createElement(\"div\",{className:\"list-ingredients\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Ingredientes\"),/*#__PURE__*/React.createElement(\"ul\",null,functionRenderRecipe(recipeRender)[0].map(function(ingredient,position){return/*#__PURE__*/React.createElement(\"li\",{\"data-testid\":\"\".concat(position,\"-ingredient-name-and-measure\"),key:v4()},ingredient,functionRenderRecipe(recipeRender)[1][position]);}))),/*#__PURE__*/React.createElement(\"p\",{\"data-testid\":\"instructions\",className:\"instructions\"},/*#__PURE__*/React.createElement(\"strong\",null,\"Instru\\xE7\\xF5es\"),/*#__PURE__*/React.createElement(\"br\",null),item.strInstructions),/*#__PURE__*/React.createElement(\"iframe\",{src:item.strYoutube.replace('watch?v=','embed/'),title:\"title\",\"data-testid\":\"video\"}),/*#__PURE__*/React.createElement(\"strong\",null,\"Combina\\xE7\\xF5es de Drinks\"),/*#__PURE__*/React.createElement(\"div\",{className:\"items-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"items\"},drinksRecomendation.map(function(recomendation,position){return/*#__PURE__*/React.createElement(\"div\",{\"data-testid\":\"\".concat(position,\"-recomendation-card\"),key:v4()},/*#__PURE__*/React.createElement(\"div\",{className:\"item\",\"data-testid\":\"\".concat(position,\"-recomendation-title\")},recomendation.strDrink));}))),/*#__PURE__*/React.createElement(Button,{className:\"start\",type:\"button\",\"data-testid\":\"start-recipe-btn\",variant:\"success\",onClick:function onClick(){return shouldRedirect(\"/comidas/\".concat(item.idMeal,\"/in-progress\"));}},start?'Start':'Continuar Receita'));}));}export default FoodDetails;","map":{"version":3,"sources":["/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/src/pages/FoodDetails.jsx"],"names":["React","useEffect","useState","v4","Button","Redirect","ShareBtn","useRedirect","functionSetFavoriteFood","functionRenderRecipe","HeaderWithoutSearch","FoodDetails","props","id","match","params","recipeRender","setRecipeRender","loading","setloading","shouldRedirect","redirect","drinksRecomendation","setdrinksRecomendation","heartColor","setHeartColor","start","setStart","fetchAPI","END_POINT","fetch","response","json","meals","favoriteRecipes","JSON","parse","localStorage","getItem","some","item","inProgressRecipes","fetchAPIDrinks","SIX","urlDrinks","then","results","drinks","slice","firstSix","should","path","map","strMealThumb","strMeal","blackHeartIcon","whiteHeartIcon","strCategory","ingredient","position","strInstructions","strYoutube","replace","recomendation","strDrink","idMeal"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { v4 } from 'uuid';\nimport PropTypes from 'prop-types';\nimport { Button } from 'react-bootstrap';\nimport { Redirect } from 'react-router-dom';\nimport ShareBtn from '../components/ShareBtn';\nimport useRedirect from '../hooks/useRedirect';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\nimport functionSetFavoriteFood from '../utils/functionSetFavoriteFood';\nimport functionRenderRecipe from '../utils/functionRenderRecipe';\nimport HeaderWithoutSearch from '../components/HeaderWithoutSearch';\n\nfunction FoodDetails(props) {\n  const { match: { params: { id } } } = props;\n  const [recipeRender, setRecipeRender] = useState([]);\n  const [loading, setloading] = useState(true);\n  const { shouldRedirect, redirect } = useRedirect();\n  const [drinksRecomendation, setdrinksRecomendation] = useState([]);\n  const [heartColor, setHeartColor] = useState(false);\n  const [start, setStart] = useState(true);\n\n  useEffect(() => {\n    setloading(true);\n    const fetchAPI = async () => {\n      const END_POINT = `https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`;\n      const response = await fetch(END_POINT);\n      const { meals } = await response.json();\n      setRecipeRender(meals);\n    };\n    fetchAPI();\n    setloading(false);\n  }, [id]);\n\n  useEffect(() => {\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes')) || [];\n\n    if (favoriteRecipes.some((item) => item.id === id)) {\n      setHeartColor(true);\n    }\n    const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (inProgressRecipes && inProgressRecipes.meals[id]) {\n      setStart(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    const fetchAPIDrinks = async () => {\n      const SIX = 6;\n      const urlDrinks = 'https://www.thecocktaildb.com/api/json/v1/1/search.php?s=';\n      const results = await fetch(urlDrinks).then((response) => response.json());\n      const firstSix = await results.drinks.slice(0, SIX);\n      setdrinksRecomendation(firstSix);\n    };\n    fetchAPIDrinks();\n    setloading(false);\n  }, []);\n\n  if (loading) {\n    return <h1>...carregando</h1>;\n  }\n\n  if (redirect.should) {\n    return <Redirect to={ redirect.path } />;\n  }\n\n  return (\n    <div>\n      <HeaderWithoutSearch>Detalhes</HeaderWithoutSearch>\n      {recipeRender.map((item) => (\n        <div key={ v4() } className=\"details\">\n\n          <img\n            alt=\"meal\"\n            key={ v4() }\n            src={ item.strMealThumb }\n            data-testid=\"recipe-photo\"\n            className=\"meal-img\"\n          />\n\n          <div className=\"detail-card\">\n            <h3 data-testid=\"recipe-title\">{item.strMeal}</h3>\n\n            <div className=\"details-btn-div\">\n              <ShareBtn id={ id } type=\"comida\" className=\"btn-share\" />\n\n              <Button\n                variant=\"danger\"\n                type=\"button\"\n                className=\"favorite-btn\"\n                onClick={ () => functionSetFavoriteFood(recipeRender, id, setHeartColor) }\n              >\n                <img\n                  id=\"fav-btn\"\n                  src={ heartColor ? blackHeartIcon : whiteHeartIcon }\n                  alt=\"favoritar\"\n                  data-testid=\"favorite-btn\"\n                  className=\"favorite-img\"\n                />\n              </Button>\n            </div>\n          </div>\n\n          <p data-testid=\"recipe-category\">\n            <span>Categoria: </span>\n            {item.strCategory}\n          </p>\n\n          <div className=\"list-ingredients\">\n            <h4>Ingredientes</h4>\n            <ul>\n              {functionRenderRecipe(recipeRender)[0].map((ingredient, position) => (\n                <li\n                  data-testid={ `${position}-ingredient-name-and-measure` }\n                  key={ v4() }\n                >\n                  {ingredient}\n                  {functionRenderRecipe(recipeRender)[1][position]}\n                </li>))}\n            </ul>\n          </div>\n          <p\n            data-testid=\"instructions\"\n            className=\"instructions\"\n          >\n            <strong>\n              Instruções\n            </strong>\n            <br />\n            {item.strInstructions}\n          </p>\n          <iframe\n            src={ item.strYoutube.replace('watch?v=', 'embed/') }\n            title=\"title\"\n            data-testid=\"video\"\n          />\n\n          <strong>Combinações de Drinks</strong>\n          <div className=\"items-wrapper\">\n            <div className=\"items\">\n              {drinksRecomendation.map((recomendation, position) => (\n                <div\n                  data-testid={ `${position}-recomendation-card` }\n                  key={ v4() }\n                >\n                  <div\n                    className=\"item\"\n                    data-testid={ `${position}-recomendation-title` }\n                  >\n                    {recomendation.strDrink}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n          <Button\n            className=\"start\"\n            type=\"button\"\n            data-testid=\"start-recipe-btn\"\n            variant=\"success\"\n            onClick={ () => shouldRedirect(`/comidas/${item.idMeal}/in-progress`) }\n          >\n            { start ? 'Start' : 'Continuar Receita' }\n          </Button>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nFoodDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }),\n  }).isRequired,\n};\n\nexport default FoodDetails;\n"]},"metadata":{},"sourceType":"module"}