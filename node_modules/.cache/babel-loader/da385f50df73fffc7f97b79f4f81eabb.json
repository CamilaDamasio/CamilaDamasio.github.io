{"ast":null,"code":"var _jsxFileName = \"/home/camila/\\xC1rea de Trabalho/project-recipes-app-styles/src/pages/DrinksDetails.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { v4 } from 'uuid';\nimport PropTypes from 'prop-types';\nimport { Button } from 'react-bootstrap';\nimport { Redirect } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ShareBtn from '../components/ShareBtn';\nimport useRedirect from '../hooks/useRedirect';\nimport whiteHeartIcon from \"../images/whiteHeartIcon.svg\";\nimport blackHeartIcon from \"../images/blackHeartIcon.svg\";\nimport fuctionSetFavorite from '../utils/functionSetFavorite';\nimport functionRenderRecipe from '../utils/functionRenderRecipe';\nimport HeaderWithoutSearch from '../components/HeaderWithoutSearch';\nimport Loading from '../components/Loading';\nimport { setLoading } from '../redux/actions/loading';\n\nfunction DrinksDetails(props) {\n  const {\n    match: {\n      params: {\n        id\n      }\n    }\n  } = props;\n  const [recipeRender, setRecipeRender] = useState([]); // const [loading, setloading] = useState(true);\n\n  const {\n    shouldRedirect,\n    redirect\n  } = useRedirect();\n  const [mealsRecomendation, setmealsRecomendation] = useState([]);\n  const [heartColor, setHeartColor] = useState(false);\n  const [start, setStart] = useState(true);\n  const dispatch = useDispatch();\n  const {\n    loading\n  } = useSelector(state => state.reducerAPI);\n  useEffect(() => {\n    dispatch(setLoading(true));\n\n    const fetchAPI = async () => {\n      const END_POINT = `https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=${id}`;\n      const response = await fetch(END_POINT);\n      const {\n        drinks\n      } = await response.json();\n      setRecipeRender(drinks);\n    };\n\n    fetchAPI();\n    dispatch(setLoading(false));\n  }, [id, dispatch]);\n  useEffect(() => {\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes')) || [];\n\n    if (favoriteRecipes.some(item => item.id === id)) {\n      setHeartColor(true);\n    }\n\n    const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (inProgressRecipes && inProgressRecipes.cocktails[id]) {\n      setStart(false);\n    }\n  }, [id]);\n  useEffect(() => {\n    dispatch(setLoading(true));\n\n    const fetchAPIMeals = async () => {\n      const SIX = 6;\n      const urlDrinks = 'https://www.themealdb.com/api/json/v1/1/search.php?s=';\n      const results = await fetch(urlDrinks).then(response => response.json());\n      const firstSix = await results.meals.slice(0, SIX);\n      setmealsRecomendation(firstSix);\n    };\n\n    fetchAPIMeals();\n    dispatch(setLoading(false));\n  }, [dispatch]);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 12\n      }\n    });\n  }\n\n  if (redirect.should) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: redirect.path,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(HeaderWithoutSearch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, \"Detalhes\"), !recipeRender ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 24\n    }\n  }) : recipeRender.map(item => /*#__PURE__*/React.createElement(\"div\", {\n    key: v4(),\n    className: \"details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"drink\",\n    key: v4(),\n    src: item.strDrinkThumb,\n    \"data-testid\": \"recipe-photo\",\n    className: \"drink-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detail-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, item.strDrink), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"details-btn-div\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ShareBtn, {\n    id: id,\n    type: \"bebida\",\n    className: \"btn-share\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"danger\",\n    type: \"button\",\n    className: \"favorite-btn\",\n    onClick: () => fuctionSetFavorite(recipeRender, id, setHeartColor),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    id: \"fav-btn\",\n    src: heartColor ? blackHeartIcon : whiteHeartIcon,\n    alt: \"favoritar\",\n    \"data-testid\": \"favorite-btn\",\n    className: \"favorite-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 19\n    }\n  })))), /*#__PURE__*/React.createElement(\"p\", {\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, \"Categoria: \"), item.strAlcoholic), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-ingredients\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, \"Ingredientes\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, functionRenderRecipe(recipeRender)[0].map((ingredient, position) => /*#__PURE__*/React.createElement(\"li\", {\n    \"data-testid\": `${position}-ingredient-name-and-measure`,\n    key: v4(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }, ingredient, functionRenderRecipe(recipeRender)[1][position])))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"instructions\",\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, \"Instru\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }), item.strInstructions), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"items-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"items\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }, mealsRecomendation.map((recomendation, position) => /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": `${position}-recomendation-card`,\n    key: v4(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"item\",\n    \"data-testid\": `${position}-recomendation-title`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, recomendation.strMeal))))), /*#__PURE__*/React.createElement(Button, {\n    className: \"start\",\n    variant: \"success\",\n    type: \"button\",\n    \"data-testid\": \"start-recipe-btn\",\n    onClick: () => shouldRedirect(`/bebidas/${item.idDrink}/in-progress`),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, start ? 'Start' : 'Continuar Receita'))));\n}\n\nDrinksDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string\n    })\n  }).isRequired\n};\nexport default DrinksDetails;","map":{"version":3,"sources":["/home/camila/√Årea de Trabalho/project-recipes-app-styles/src/pages/DrinksDetails.jsx"],"names":["React","useEffect","useState","v4","PropTypes","Button","Redirect","useDispatch","useSelector","ShareBtn","useRedirect","fuctionSetFavorite","functionRenderRecipe","HeaderWithoutSearch","Loading","setLoading","DrinksDetails","props","match","params","id","recipeRender","setRecipeRender","shouldRedirect","redirect","mealsRecomendation","setmealsRecomendation","heartColor","setHeartColor","start","setStart","dispatch","loading","state","reducerAPI","fetchAPI","END_POINT","response","fetch","drinks","json","favoriteRecipes","JSON","parse","localStorage","getItem","some","item","inProgressRecipes","cocktails","fetchAPIMeals","SIX","urlDrinks","results","then","firstSix","meals","slice","should","path","map","strDrinkThumb","strDrink","blackHeartIcon","whiteHeartIcon","strAlcoholic","ingredient","position","strInstructions","recomendation","strMeal","idDrink","propTypes","shape","string","isRequired"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { v4 } from 'uuid';\nimport PropTypes from 'prop-types';\nimport { Button } from 'react-bootstrap';\nimport { Redirect } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ShareBtn from '../components/ShareBtn';\nimport useRedirect from '../hooks/useRedirect';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\nimport fuctionSetFavorite from '../utils/functionSetFavorite';\nimport functionRenderRecipe from '../utils/functionRenderRecipe';\nimport HeaderWithoutSearch from '../components/HeaderWithoutSearch';\nimport Loading from '../components/Loading';\nimport { setLoading } from '../redux/actions/loading';\n\nfunction DrinksDetails(props) {\n  const { match: { params: { id } } } = props;\n  const [recipeRender, setRecipeRender] = useState([]);\n  // const [loading, setloading] = useState(true);\n  const { shouldRedirect, redirect } = useRedirect();\n  const [mealsRecomendation, setmealsRecomendation] = useState([]);\n  const [heartColor, setHeartColor] = useState(false);\n  const [start, setStart] = useState(true);\n  const dispatch = useDispatch();\n  const { loading } = useSelector((state) => state.reducerAPI);\n\n  useEffect(() => {\n    dispatch(setLoading(true));\n    const fetchAPI = async () => {\n      const END_POINT = `https://www.thecocktaildb.com/api/json/v1/1/lookup.php?i=${id}`;\n      const response = await fetch(END_POINT);\n      const { drinks } = await response.json();\n      setRecipeRender(drinks);\n    };\n    fetchAPI();\n    dispatch(setLoading(false));\n  }, [id, dispatch]);\n\n  useEffect(() => {\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes')) || [];\n\n    if (favoriteRecipes.some((item) => item.id === id)) {\n      setHeartColor(true);\n    }\n    const inProgressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (inProgressRecipes && inProgressRecipes.cocktails[id]) {\n      setStart(false);\n    }\n  }, [id]);\n\n  useEffect(() => {\n    dispatch(setLoading(true));\n    const fetchAPIMeals = async () => {\n      const SIX = 6;\n      const urlDrinks = 'https://www.themealdb.com/api/json/v1/1/search.php?s=';\n      const results = await fetch(urlDrinks).then((response) => response.json());\n      const firstSix = await results.meals.slice(0, SIX);\n      setmealsRecomendation(firstSix);\n    };\n    fetchAPIMeals();\n    dispatch(setLoading(false));\n  }, [dispatch]);\n\n  if (loading) {\n    return <Loading />;\n  }\n\n  if (redirect.should) {\n    return <Redirect to={ redirect.path } />;\n  }\n\n  return (\n    <div>\n      <HeaderWithoutSearch>Detalhes</HeaderWithoutSearch>\n      {!recipeRender ? <Loading />\n        : recipeRender.map((item) => (\n          <div key={ v4() } className=\"details\">\n            <img\n              alt=\"drink\"\n              key={ v4() }\n              src={ item.strDrinkThumb }\n              data-testid=\"recipe-photo\"\n              className=\"drink-img\"\n            />\n\n            <div className=\"detail-card\">\n\n              <h3 data-testid=\"recipe-title\">{item.strDrink}</h3>\n\n              <div className=\"details-btn-div\">\n                <ShareBtn id={ id } type=\"bebida\" className=\"btn-share\" />\n\n                <Button\n                  variant=\"danger\"\n                  type=\"button\"\n                  className=\"favorite-btn\"\n                  onClick={ () => fuctionSetFavorite(recipeRender, id, setHeartColor) }\n                >\n                  <img\n                    id=\"fav-btn\"\n                    src={ heartColor ? blackHeartIcon : whiteHeartIcon }\n                    alt=\"favoritar\"\n                    data-testid=\"favorite-btn\"\n                    className=\"favorite-img\"\n                  />\n                </Button>\n              </div>\n            </div>\n\n            <p data-testid=\"recipe-category\">\n              <span>Categoria: </span>\n              {item.strAlcoholic}\n            </p>\n\n            <div className=\"list-ingredients\">\n\n              <h4>Ingredientes</h4>\n              <ul>\n                {functionRenderRecipe(recipeRender)[0].map((ingredient, position) => (\n                  <li\n                    data-testid={ `${position}-ingredient-name-and-measure` }\n                    key={ v4() }\n                  >\n                    {ingredient}\n                    {functionRenderRecipe(recipeRender)[1][position]}\n                  </li>))}\n              </ul>\n            </div>\n\n            <p\n              className=\"instructions\"\n              data-testid=\"instructions\"\n            >\n              <strong>\n                Instru√ß√µes\n              </strong>\n              <br />\n              {item.strInstructions}\n            </p>\n\n            <div className=\"items-wrapper\">\n              <div className=\"items\">\n                {mealsRecomendation.map((recomendation, position) => (\n                  <div\n                    data-testid={ `${position}-recomendation-card` }\n                    key={ v4() }\n                  >\n                    <div\n                      className=\"item\"\n                      data-testid={ `${position}-recomendation-title` }\n                    >\n                      {recomendation.strMeal}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <Button\n              className=\"start\"\n              variant=\"success\"\n              type=\"button\"\n              data-testid=\"start-recipe-btn\"\n              onClick={ () => shouldRedirect(`/bebidas/${item.idDrink}/in-progress`) }\n            >\n              { start ? 'Start' : 'Continuar Receita' }\n            </Button>\n          </div>\n        ))}\n    </div>\n  );\n}\n\nDrinksDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }),\n  }).isRequired,\n};\n\nexport default DrinksDetails;\n"]},"metadata":{},"sourceType":"module"}