{"ast":null,"code":"import _defineProperty from\"/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{Redirect}from'react-router-dom';import Footer from'../components/Footer';import HeaderWithSearch from'../components/HeaderWithSearch';import{getMeal}from'../redux/actions';import useRedirect from'../hooks/useRedirect';import Loading from'../components/Loading';function FoodByOrigin(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),originsListFilter=_useState2[0],setOriginsListFilter=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),origins=_useState4[0],setOrigins=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),firstTwelve=_useState6[0],setFistTwelve=_useState6[1];var _useState7=useState({selected:'All'}),_useState8=_slicedToArray(_useState7,2),originSelect=_useState8[0],setOriginSelect=_useState8[1];var _useRedirect=useRedirect(),shouldRedirect=_useRedirect.shouldRedirect,redirect=_useRedirect.redirect;var TWELVE=12;var selected=originSelect.selected;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),_useSelector$reducerA=_useSelector.reducerAPI,loading=_useSelector$reducerA.loading,meals=_useSelector$reducerA.meals;useEffect(function(){dispatch(getMeal());},[dispatch]);useEffect(function(){var fetchFilterOrigins=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var END_POINT,response,_yield$response$json,filterOriginsList;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(selected!=='All')){_context.next=10;break;}END_POINT=\"https://www.themealdb.com/api/json/v1/1/filter.php?a=\".concat(selected);_context.next=4;return fetch(END_POINT);case 4:response=_context.sent;_context.next=7;return response.json();case 7:_yield$response$json=_context.sent;filterOriginsList=_yield$response$json.meals;return _context.abrupt(\"return\",setOriginsListFilter(filterOriginsList));case 10:case\"end\":return _context.stop();}}},_callee);}));return function fetchFilterOrigins(){return _ref.apply(this,arguments);};}();fetchFilterOrigins();},[selected]);useEffect(function(){var fetchOrigins=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var END_POINT,response,_yield$response$json2,originsList,originsMap,results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:END_POINT='https://www.themealdb.com/api/json/v1/1/list.php?a=list';_context2.next=3;return fetch(END_POINT);case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:_yield$response$json2=_context2.sent;originsList=_yield$response$json2.meals;originsMap=originsList.map(function(_ref3){var strArea=_ref3.strArea;return strArea;});results=['All'].concat(_toConsumableArray(originsMap));return _context2.abrupt(\"return\",setOrigins(results));case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchOrigins(){return _ref2.apply(this,arguments);};}();fetchOrigins();},[origins]);useEffect(function(){if(selected==='All'){setFistTwelve(meals.slice(0,TWELVE));}else{setFistTwelve(originsListFilter.slice(0,TWELVE));}},[originsListFilter,meals,selected]);var handleChange=function handleChange(_ref4){var _ref4$target=_ref4.target,name=_ref4$target.name,type=_ref4$target.type,value=_ref4$target.value,checked=_ref4$target.checked;function newValue(){switch(type){case'checkbox':return checked;case'number':return+value;default:return value;}}setOriginSelect(_objectSpread(_objectSpread({},originSelect),{},_defineProperty({},name,newValue())));};if(loading){return/*#__PURE__*/React.createElement(Loading,null);}if(redirect.should){return/*#__PURE__*/React.createElement(Redirect,{to:redirect.path});}return/*#__PURE__*/React.createElement(\"div\",{className:\"explore\"},/*#__PURE__*/React.createElement(HeaderWithSearch,null,\"Explorar Origem\"),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"selected\",className:\"origin-select\"},\"Origin\",/*#__PURE__*/React.createElement(\"select\",{\"data-testid\":\"explore-by-area-dropdown\",id:\"selected\",name:\"selected\",onChange:handleChange,value:selected},origins.map(function(option){return/*#__PURE__*/React.createElement(\"option\",{\"data-testid\":\"\".concat(option,\"-option\"),key:option,value:option},option);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"ingredients-list\"},firstTwelve.map(function(_ref5,index){var idMeal=_ref5.idMeal,strMealThumb=_ref5.strMealThumb,strMeal=_ref5.strMeal;return/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return shouldRedirect(\"/comidas/\".concat(idMeal));},key:idMeal,\"data-testid\":\"\".concat(index,\"-recipe-card\"),className:\"recipe-card\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"meal\",src:strMealThumb,\"data-testid\":\"\".concat(index,\"-card-img\")}),/*#__PURE__*/React.createElement(\"h4\",{\"data-testid\":\"\".concat(index,\"-card-name\")},strMeal));})),/*#__PURE__*/React.createElement(Footer,null));}export default FoodByOrigin;","map":{"version":3,"sources":["/home/camila/Repositorios_GitHub/sd-012-project-recipes-app/src/pages/FoodByOrigin.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","Redirect","Footer","HeaderWithSearch","getMeal","useRedirect","Loading","FoodByOrigin","originsListFilter","setOriginsListFilter","origins","setOrigins","firstTwelve","setFistTwelve","selected","originSelect","setOriginSelect","shouldRedirect","redirect","TWELVE","dispatch","state","reducerAPI","loading","meals","fetchFilterOrigins","END_POINT","fetch","response","json","filterOriginsList","fetchOrigins","originsList","originsMap","map","strArea","results","slice","handleChange","target","name","type","value","checked","newValue","should","path","option","index","idMeal","strMealThumb","strMeal"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport Footer from '../components/Footer';\nimport HeaderWithSearch from '../components/HeaderWithSearch';\nimport { getMeal } from '../redux/actions';\nimport useRedirect from '../hooks/useRedirect';\nimport Loading from '../components/Loading';\n\nfunction FoodByOrigin() {\n  const [originsListFilter, setOriginsListFilter] = useState([]);\n  const [origins, setOrigins] = useState([]);\n  const [firstTwelve, setFistTwelve] = useState([]);\n  const [originSelect, setOriginSelect] = useState({ selected: 'All' });\n  const { shouldRedirect, redirect } = useRedirect();\n  const TWELVE = 12;\n\n  const { selected } = originSelect;\n\n  const dispatch = useDispatch();\n  const { reducerAPI: { loading, meals } } = useSelector((state) => state);\n\n  useEffect(() => {\n    dispatch(getMeal());\n  }, [dispatch]);\n\n  useEffect(() => {\n    const fetchFilterOrigins = async () => {\n      if (selected !== 'All') {\n        const END_POINT = `https://www.themealdb.com/api/json/v1/1/filter.php?a=${selected}`;\n\n        const response = await fetch(END_POINT);\n        const { meals: filterOriginsList } = await response.json();\n        return setOriginsListFilter(filterOriginsList);\n      }\n    };\n    fetchFilterOrigins();\n  }, [selected]);\n\n  useEffect(() => {\n    const fetchOrigins = async () => {\n      const END_POINT = 'https://www.themealdb.com/api/json/v1/1/list.php?a=list';\n\n      const response = await fetch(END_POINT);\n      const { meals: originsList } = await response.json();\n      const originsMap = originsList.map(({ strArea }) => strArea);\n      const results = ['All', ...originsMap];\n      return setOrigins(results);\n    };\n    fetchOrigins();\n  }, [origins]);\n\n  useEffect(() => {\n    if (selected === 'All') {\n      setFistTwelve(meals.slice(0, TWELVE));\n    } else {\n      setFistTwelve(originsListFilter.slice(0, TWELVE));\n    }\n  }, [originsListFilter, meals, selected]);\n\n  const handleChange = ({ target: { name, type, value, checked } }) => {\n    function newValue() {\n      switch (type) {\n      case 'checkbox': return checked;\n      case 'number': return +value;\n      default: return value;\n      }\n    }\n    setOriginSelect({ ...originSelect, [name]: newValue() });\n  };\n\n  if (loading) {\n    return <Loading />;\n  }\n\n  if (redirect.should) {\n    return <Redirect to={ redirect.path } />;\n  }\n  return (\n    <div className=\"explore\">\n      <HeaderWithSearch>Explorar Origem</HeaderWithSearch>\n      <label htmlFor=\"selected\" className=\"origin-select\">\n        Origin\n        <select\n          data-testid=\"explore-by-area-dropdown\"\n          id=\"selected\"\n          name=\"selected\"\n          onChange={ handleChange }\n          value={ selected }\n        >\n          { origins.map((option) => (\n            <option\n              data-testid={ `${option}-option` }\n              key={ option }\n              value={ option }\n            >\n              { option }\n            </option>\n          )) }\n        </select>\n      </label>\n      <div className=\"ingredients-list\">\n        {\n          firstTwelve.map(({ idMeal, strMealThumb, strMeal }, index) => (\n            <button\n              type=\"button\"\n              onClick={ () => shouldRedirect(`/comidas/${idMeal}`) }\n              key={ idMeal }\n              data-testid={ `${index}-recipe-card` }\n              className=\"recipe-card\"\n            >\n              <img\n                alt=\"meal\"\n                src={ strMealThumb }\n                data-testid={ `${index}-card-img` }\n              />\n              <h4 data-testid={ `${index}-card-name` }>{strMeal}</h4>\n            </button>\n          ))\n        }\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default FoodByOrigin;\n"]},"metadata":{},"sourceType":"module"}