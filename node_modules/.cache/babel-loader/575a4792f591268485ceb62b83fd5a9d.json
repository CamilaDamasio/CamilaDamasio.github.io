{"ast":null,"code":"import _regeneratorRuntime from\"/home/camila/Repositorios_GitHub/project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/camila/Repositorios_GitHub/project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/camila/Repositorios_GitHub/project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/camila/Repositorios_GitHub/project-recipes-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{Redirect}from'react-router-dom';import{v4}from'uuid';import{Button}from'react-bootstrap';import{getMeal}from'../redux/actions';import HeaderWithSearch from'../components/HeaderWithSearch';import Footer from'../components/Footer';import useCategories from'../hooks/useCategories';import{setLoading}from'../redux/actions/loading';import useRedirect from'../hooks/useRedirect';import LoadingSmall from'../components/LoadingSmall';function MealsList(){var _useSelector=useSelector(function(state){return state;}),_useSelector$reducerA=_useSelector.reducerAPI,loading=_useSelector$reducerA.loading,meals=_useSelector$reducerA.meals;var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),renderedMeals=_useState2[0],setRenderedMeals=_useState2[1];var _useState3=useState('all'),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var TWELVE=12;var SELECTED_MEAL='cat selected-meal';var _useRedirect=useRedirect(),shouldRedirect=_useRedirect.shouldRedirect,redirect=_useRedirect.redirect;var _useSelector2=useSelector(function(state){return state.reducerAPI;}),search=_useSelector2.search,searchType=_useSelector2.searchType;useEffect(function(){dispatch(getMeal(search,searchType));},[dispatch,search,searchType]);useEffect(function(){if(meals===null){global.alert('Sinto muito, nÃ£o encontramos nenhuma receita para esses filtros.');}if(meals!==null&&meals.length>1){var newMeals=_toConsumableArray(meals.slice(0,TWELVE));setRenderedMeals(newMeals);}},[meals]);var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),catList=_useState6[0],setCatList=_useState6[1];var CATURL='https://www.themealdb.com/api/json/v1/1/list.php?c=list';var categories=useCategories(CATURL,'meals');useEffect(function(){setCatList(categories);},[categories]);if(meals!==null&&meals.length===1){return/*#__PURE__*/React.createElement(Redirect,{to:\"/comidas/\".concat(meals[0].idMeal)});}var handleClickAll=function handleClickAll(){setSelected('all');var newMeals=_toConsumableArray(meals.slice(0,TWELVE));setRenderedMeals(newMeals);};var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(target,name){var url,results,firstTwelve;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(setLoading(true));if(!(target.className!==SELECTED_MEAL)){_context.next=13;break;}setSelected(name);url=\"https://www.themealdb.com/api/json/v1/1/filter.php?c=\".concat(name);_context.next=6;return fetch(url).then(function(response){return response.json();});case 6:results=_context.sent;_context.next=9;return results.meals.slice(0,TWELVE);case 9:firstTwelve=_context.sent;setRenderedMeals(firstTwelve);_context.next=15;break;case 13:setSelected('all');handleClickAll();case 15:dispatch(setLoading(false));case 16:case\"end\":return _context.stop();}}},_callee);}));return function handleClick(_x,_x2){return _ref.apply(this,arguments);};}();if(redirect.should)return/*#__PURE__*/React.createElement(Redirect,{to:redirect.path});return/*#__PURE__*/React.createElement(\"div\",{className:\"main-div\"},/*#__PURE__*/React.createElement(HeaderWithSearch,null,\"Comidas\"),/*#__PURE__*/React.createElement(\"div\",{className:\"cat-btns\"},catList.map(function(_ref2){var strCategory=_ref2.strCategory;return/*#__PURE__*/React.createElement(Button,{variant:\"info\",type:\"button\",key:v4(),onClick:function onClick(_ref3){var target=_ref3.target;return handleClick(target,strCategory);},\"data-testid\":\"\".concat(strCategory,\"-category-filter\"),className:selected===strCategory?SELECTED_MEAL:'cat not-selected'},strCategory);}),/*#__PURE__*/React.createElement(Button,{variant:\"info\",type:\"button\",onClick:handleClickAll,\"data-testid\":\"All-category-filter\",className:selected==='all'?SELECTED_MEAL:'cat not-selected'},\"All\")),/*#__PURE__*/React.createElement(\"div\",{className:\"cards-list\"},loading?/*#__PURE__*/React.createElement(LoadingSmall,null):renderedMeals.map(function(item,index){return/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return shouldRedirect(\"/comidas/\".concat(item.idMeal));},key:v4(),\"data-testid\":\"\".concat(index,\"-recipe-card\"),className:\"recipe-card\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"meal\",src:item.strMealThumb,\"data-testid\":\"\".concat(index,\"-card-img\")}),/*#__PURE__*/React.createElement(\"h4\",{\"data-testid\":\"\".concat(index,\"-card-name\"),className:\"card-name\"},item.strMeal));})),/*#__PURE__*/React.createElement(Footer,null));}export default MealsList;","map":{"version":3,"sources":["/home/camila/Repositorios_GitHub/project-recipes-app/src/pages/MealsList.jsx"],"names":["React","useEffect","useState","useSelector","useDispatch","Redirect","v4","Button","getMeal","HeaderWithSearch","Footer","useCategories","setLoading","useRedirect","LoadingSmall","MealsList","state","reducerAPI","loading","meals","dispatch","renderedMeals","setRenderedMeals","selected","setSelected","TWELVE","SELECTED_MEAL","shouldRedirect","redirect","search","searchType","global","alert","length","newMeals","slice","catList","setCatList","CATURL","categories","idMeal","handleClickAll","handleClick","target","name","className","url","fetch","then","response","json","results","firstTwelve","should","path","map","strCategory","item","index","strMealThumb","strMeal"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { v4 } from 'uuid';\nimport { Button } from 'react-bootstrap';\nimport { getMeal } from '../redux/actions';\nimport HeaderWithSearch from '../components/HeaderWithSearch';\nimport Footer from '../components/Footer';\nimport useCategories from '../hooks/useCategories';\nimport { setLoading } from '../redux/actions/loading';\nimport useRedirect from '../hooks/useRedirect';\nimport LoadingSmall from '../components/LoadingSmall';\n\nfunction MealsList() {\n  const { reducerAPI: { loading, meals } } = useSelector((state) => state);\n  const dispatch = useDispatch();\n  const [renderedMeals, setRenderedMeals] = useState([]);\n  const [selected, setSelected] = useState('all');\n  const TWELVE = 12;\n  const SELECTED_MEAL = 'cat selected-meal';\n  const { shouldRedirect, redirect } = useRedirect();\n  const { search, searchType } = useSelector((state) => state.reducerAPI);\n\n  useEffect(() => {\n    dispatch(getMeal(search, searchType));\n  }, [dispatch, search, searchType]);\n\n  useEffect(() => {\n    if (meals === null) {\n      global.alert('Sinto muito, nÃ£o encontramos nenhuma receita para esses filtros.');\n    }\n    if (meals !== null && meals.length > 1) {\n      const newMeals = [...meals.slice(0, TWELVE)];\n      setRenderedMeals(newMeals);\n    }\n  }, [meals]);\n\n  const [catList, setCatList] = useState([]);\n  const CATURL = 'https://www.themealdb.com/api/json/v1/1/list.php?c=list';\n  const categories = useCategories(CATURL, 'meals');\n\n  useEffect(() => {\n    setCatList(categories);\n  }, [categories]);\n\n  if (meals !== null && meals.length === 1) {\n    return <Redirect to={ `/comidas/${meals[0].idMeal}` } />;\n  }\n\n  const handleClickAll = () => {\n    setSelected('all');\n    const newMeals = [...meals.slice(0, TWELVE)];\n    setRenderedMeals(newMeals);\n  };\n\n  const handleClick = async (target, name) => {\n    dispatch(setLoading(true));\n    if (target.className !== SELECTED_MEAL) {\n      setSelected(name);\n      const url = `https://www.themealdb.com/api/json/v1/1/filter.php?c=${name}`;\n      const results = await fetch(url).then((response) => response.json());\n      const firstTwelve = await results.meals.slice(0, TWELVE);\n      setRenderedMeals(firstTwelve);\n    } else {\n      setSelected('all');\n      handleClickAll();\n    }\n    dispatch(setLoading(false));\n  };\n\n  if (redirect.should) return <Redirect to={ redirect.path } />;\n\n  return (\n    <div className=\"main-div\">\n      <HeaderWithSearch>\n        Comidas\n      </HeaderWithSearch>\n      <div className=\"cat-btns\">\n        { catList.map(({ strCategory }) => (\n          <Button\n            variant=\"info\"\n            type=\"button\"\n            key={ v4() }\n            onClick={ ({ target }) => handleClick(target, strCategory) }\n            data-testid={ `${strCategory}-category-filter` }\n            className={ selected === strCategory ? SELECTED_MEAL : 'cat not-selected' }\n          >\n            {strCategory}\n          </Button>\n        ))}\n        <Button\n          variant=\"info\"\n          type=\"button\"\n          onClick={ handleClickAll }\n          data-testid=\"All-category-filter\"\n          className={ selected === 'all' ? SELECTED_MEAL : 'cat not-selected' }\n        >\n          All\n        </Button>\n      </div>\n      <div className=\"cards-list\">\n        { loading ? <LoadingSmall /> : renderedMeals.map((item, index) => (\n          <button\n            type=\"button\"\n            onClick={ () => shouldRedirect(`/comidas/${item.idMeal}`) }\n            key={ v4() }\n            data-testid={ `${index}-recipe-card` }\n            className=\"recipe-card\"\n          >\n            <img\n              alt=\"meal\"\n              src={ item.strMealThumb }\n              data-testid={ `${index}-card-img` }\n            />\n            <h4\n              data-testid={ `${index}-card-name` }\n              className=\"card-name\"\n            >\n              {item.strMeal}\n            </h4>\n          </button>\n        ))}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default MealsList;\n"]},"metadata":{},"sourceType":"module"}